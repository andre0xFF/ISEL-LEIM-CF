#define pinoI 2
#define pinoSPTA 3
#define pinoSPTF 4
#define pinoSPC 5
#define pinoC0 6
#define pinoC1 7
#define pinoC2 8
#define pinoC3 9
#define pinoM 10
#define pinoR 11



//Variáveis lógias de entrada
boolean I, SPTA, C0, C1, C2, C3, CC, SPTF, SPC;

//Variáveis lógicas de saída
boolean M, R;

//Variáveis correspondentes aos 4 bits do codigo secreto
boolean S0 = 1;
boolean S1 = 0;
boolean S2 = 0;
boolean S3 = 1;

//Função lógica de confirmação do código certo
boolean codigoCerto(boolean C0, boolean C1, boolean C2, boolean C3)
{
  return !(C0 ^ S0) & !(C1 ^ S1) & !(C2 ^ S2) & !(C3 ^ S3);
}

//Função lógica de saída M
boolean funcaoM(boolean I, boolean SPTA, boolean CC, boolean SPTF, boolean SPC)
{
  return I & !SPTA | !CC & !SPTF & !SPC & !I | !SPTA & CC & !I | !SPTF & !SPTA & SPC & !I;
  // I and ~SPTA or ~I and CC and ~SPTA or ~I and ~SPTF and ~CC and ~SPC or ~I and ~SPTF and ~SPTA and SPC
}

//Função lógica de saída R
boolean funcaoR(boolean I, boolean SPTA, boolean CC,boolean SPTF, boolean SPC)
{
  return !SPTA & I | (SPC |(CC & !SPTA)) & !I; 
}

//Função de Leitura correspondentes aos sensores de entrada

void lerSensores()
{
  I = digitalRead(pinoI);
  SPTA = digitalRead(pinoSPTA);
  SPTF = digitalRead(pinoSPTF);
  SPC = digitalRead(pinoSPC);
  C0 = digitalRead(pinoC0);
  C1 = digitalRead(pinoC1);
  C2 = digitalRead(pinoC2);
  C3 = digitalRead(pinoC3);
  CC = codigoCerto(C0,C1,C2,C3);
}

//Calcular o valor lógico das variáveis de saída
void calcularFuncoesSaida()
{
  M = funcaoM(I, SPTA, CC, SPTF, SPC);
  R = funcaoR(I, SPTA, CC, SPTF, SPC);
}

//Escrever as variaveis de saida calculadas na funcao calcularFuncoesSaida
void escreverSaida()
{
  digitalWrite(pinoM, M);
  digitalWrite(pinoR, R);
}


void setup() {
//Definir o modo de entrada/saida dos pinos
  Serial.begin(9600);
  pinMode(pinoI, INPUT);  
  pinMode(pinoSPTA, INPUT);
  pinMode(pinoSPTF, INPUT);
  pinMode(pinoSPC, INPUT);
  pinMode(pinoC0, INPUT);  
  pinMode(pinoC1, INPUT);
  pinMode(pinoC2, INPUT);
  pinMode(pinoC3, INPUT);
  pinMode(pinoM, OUTPUT);
  pinMode(pinoR, OUTPUT);
}

void loop() {
  lerSensores();
  calcularFuncoesSaida();
  escreverSaida();
}